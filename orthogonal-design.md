autoscale: true
build-lists: true
theme: Olive Green, 3

# 正交设计

---

# 软件的目的

* 实现功能
* 最直接的方式 -> 单一过程
* 过程日益复杂 -> 代码划分
* 如何分，怎样合 -> 软件设计

---

> 软件设计就是关心代码的**怎样分**，再**怎样合**。

---

# 为什么要设计

* 经济性
* 代码的划分与再组合方式会影响到软件开发与维护的成本
* 时间越长变化越多影响越大

---

> 软件设计是为了在让软件在长期范围内容易应对变化。- *Kent Bect*

---

# 设计的目标

* 局部化影响 - 正交性

---

> 要编写复杂软件又不至于一败涂地的唯一方法，就是用定义清晰的接口把若干简单模块组合起来，如此一来，多数问题只会出现在局部，那么还有希望对局部进行改进或优化，而不至于牵动全身。- 《UNIX 编程艺术》

---

# 正交设计

* 每一个动作只改变一件事 - 高内聚
* 任何操作均无负作用 - 低耦合
* 例子 - 遥控器

---

> Do one thing, do it well. - Doug Mcllroy

---

# 如何实现 - 正交四原则

* 消除重复
* 分离不同的变化方向
* 缩小依赖范围
* 向着稳定的方向依赖

---

# 消除重复

* 相同的代码出现在不同的地方意味着低内聚
* 重复代码意味着对同一**知识**的强耦合

---

# 分离不同的变化方向

* 变化的方向代表着模块的职责，多个变化方向意味着多个职责
* 分离变化的方向就是分离模块的职责
* 例子 - 资源文件读取器

---

# 缩小依赖范围

* API 应包含尽可能少的知识
* API 应减少不必要的依赖
* 例子 - 服务端调用

---

# 向着稳定的方向依赖

* API 变化，会导致调用方跟着变化
* 如何才能保持 API 的稳定？- 站在客户的角度而不是实现方便的角度定义 API

---

# 后记，如何定义"一"？

* 到底要拆到什么程度？

---

# 参考文章

* [变化驱动：正交设计](https://insights.thoughtworks.cn/change-driven-orthogonal-design/)
* 《UNIX 编程艺术》
